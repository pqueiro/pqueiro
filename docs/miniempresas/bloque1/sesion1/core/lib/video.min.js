/*!
Video.js - HTML5 Video Player
Version 3.2.0
LGPL v3 LICENSE INFO
This file is part of Video.js. Copyright 2011 Zencoder, Inc.
Video.js is free software: you can redistribute it and/or modify
it under the terms of the GNU Lesser General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.
Video.js is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Lesser General Public License for more details.
You should have received a copy of the GNU Lesser General Public License
along with Video.js.  If not, see <http://www.gnu.org/licenses/>.
*/
(function(n,undefined){function f(){return!0}function e(){return!1}var i=n.document,u;i.createElement("video");i.createElement("audio");var r=function(n,i,r){var u;if(typeof n=="string"){if(n.indexOf("#")===0&&(n=n.slice(1)),t.players[n])return t.players[n];u=t.el(n)}else u=n;if(!u||!u.nodeName)throw new TypeError("The element or ID supplied is not valid. (VideoJS)");return u.player||new t.Player(u,i,r)},t=r;r.players={};r.options={techOrder:["html5","flash"],html5:{},flash:{swf:"core/lib/video-js.swf"},width:"auto",height:"auto",defaultVolume:0,components:{posterImage:{},textTrackDisplay:{},loadingSpinner:{},bigPlayButton:{},controlBar:{}}};!0&&(t.options.flash.swf="core/lib/video-js.swf");t.merge=function(n,t,i){t||(t={});for(var r in t)!t.hasOwnProperty(r)||i&&n.hasOwnProperty(r)||(n[r]=t[r]);return n};t.extend=function(n){this.merge(this,n,!0)};t.extend({tech:{},controlSets:{},isIE:function(){return!+"\v1"},isFF:function(){return!!t.ua.match("Firefox")},isIPad:function(){return navigator.userAgent.match(/iPad/i)!==null},isIPhone:function(){return navigator.userAgent.match(/iPhone/i)!==null},isIOS:function(){return r.isIPhone()||r.isIPad()},iOSVersion:function(){var n=navigator.userAgent.match(/OS (\d+)_/i);if(n&&n[1])return n[1]},isAndroid:function(){return navigator.userAgent.match(/Android.*AppleWebKit/i)!==null},androidVersion:function(){var n=navigator.userAgent.match(/Android (\d+)\./i);if(n&&n[1])return n[1]},testVid:i.createElement("video"),ua:navigator.userAgent,support:{},each:function(n,t){if(n&&n.length!==0)for(var i=0,r=n.length;i<r;i++)t.call(this,n[i],i)},eachProp:function(n,t){if(n)for(var i in n)n.hasOwnProperty(i)&&t.call(this,i,n[i])},el:function(n){return i.getElementById(n)},createElement:function(n,t){var u=i.createElement(n);for(var r in t)t.hasOwnProperty(r)&&(r.indexOf("-")!==-1?u.setAttribute(r,t[r]):u[r]=t[r]);return u},insertFirst:function(n,t){t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)},addClass:function(n,t){(" "+n.className+" ").indexOf(" "+t+" ")==-1&&(n.className=n.className===""?t:n.className+" "+t)},removeClass:function(n,t){if(n.className.indexOf(t)!=-1){var i=n.className.split(" ");i.splice(i.indexOf(t),1);n.className=i.join(" ")}},remove:function(n,t){if(t){var i=t.indexOf(n);if(i!=-1)return t.splice(i,1)}},blockTextSelection:function(){i.body.focus();i.onselectstart=function(){return!1}},unblockTextSelection:function(){i.onselectstart=function(){return!0}},formatTime:function(n,t){t=t||n;var i=Math.floor(n%60),r=Math.floor(n/60%60),u=Math.floor(n/3600),f=Math.floor(t/60%60),e=Math.floor(t/3600);return u=u>0||e>0?u+":":"",r=((u||f>=10)&&r<10?"0"+r:r)+":",i=i<10?"0"+i:i,u+r+i},uc:function(n){return n.charAt(0).toUpperCase()+n.slice(1)},getRelativePosition:function(n,i){return Math.max(0,Math.min(1,(n-t.findPosX(i))/i.offsetWidth))},getComputedStyleValue:function(t,i){return n.getComputedStyle(t,null).getPropertyValue(i)},trim:function(n){return n.toString().replace(/^\s+/,"").replace(/\s+$/,"")},round:function(n,t){return t||(t=0),Math.round(n*Math.pow(10,t))/Math.pow(10,t)},isEmpty:function(n){for(var t in n)return!1;return!0},createTimeRange:function(n,t){return{length:1,start:function(){return n},end:function(){return t}}},cache:{},guid:1,expando:"vdata"+(new Date).getTime(),getData:function(n){var i=n[t.expando];return i||(i=n[t.expando]=t.guid++,t.cache[i]={}),t.cache[i]},removeData:function(n){var i=n[t.expando];if(i){delete t.cache[i];try{delete n[t.expando]}catch(r){n.removeAttribute?n.removeAttribute(t.expando):n[t.expando]=null}}},proxy:function(n,i,r){i.guid||(i.guid=t.guid++);var u=function(){return i.apply(n,arguments)};return u.guid=r?r+"_"+i.guid:i.guid,u},get:function(i,r,u){var o=i.indexOf("file:")==0||n.location.href.indexOf("file:")==0&&i.indexOf("http:")==-1,f;typeof XMLHttpRequest=="undefined"&&(XMLHttpRequest=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(n){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(i){}throw new Error("This browser does not support XMLHttpRequest.");});f=new XMLHttpRequest;try{f.open("GET",i)}catch(e){return t.log("VideoJS XMLHttpRequest (open)"+i,e),!1}f.onreadystatechange=t.proxy(this,function(){f.readyState==4&&(f.status==200||o&&f.status==0?r(f.responseText):u&&u())});try{f.send()}catch(e){t.log("VideoJS XMLHttpRequest (send)",e);u&&u(e)}},setLocalStorage:function(i,r){var f=n.localStorage||!1;if(f)try{f[i]=r}catch(u){u.code==22||u.code==1014?t.log("LocalStorage Full (VideoJS)",u):t.log("LocalStorage Error (VideoJS)",u)}},getAbsoluteURL:function(n){return n.match(/^https?:\/\//)||(n=t.createElement("div",{innerHTML:'<a href="'+n+'">x<\/a>'}).firstChild.href),n}});t.log=function(){if(t.log.history=t.log.history||[],t.log.history.push(arguments),n.console){arguments.callee=arguments.callee.caller;var i=[].slice.call(arguments);typeof console.log=="object"?t.log.apply.call(console.log,console,i):console.log.apply(console,i)}},function(n){function i(){}for(var r="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,timeStamp,profile,profileEnd,time,timeEnd,trace,warn".split(","),t;t=r.pop();)n[t]=n[t]||i}(function(){try{return console.log,n.console}catch(t){return n.console={}}}());t.findPosX="getBoundingClientRect"in i.documentElement?function(t){var r;try{r=t.getBoundingClientRect()}catch(s){}if(!r)return 0;var f=i.documentElement,u=i.body,e=f.clientLeft||u.clientLeft||0,o=n.pageXOffset||u.scrollLeft;return r.left+o-e}:function(n){for(var t=n.offsetLeft;n=obj.offsetParent;)n.className.indexOf("video-js")==-1,t+=n.offsetLeft;return t},function(){var n=!1,i=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;t.Class=function(){};t.Class.extend=function(t){function u(){return!n&&this.init?this.init.apply(this,arguments):n?void 0:arguments.callee.prototype.init()}var e=this.prototype,f,r;n=!0;f=new this;n=!1;for(r in t)f[r]=typeof t[r]=="function"&&typeof e[r]=="function"&&i.test(t[r])?function(n,t){return function(){var r=this._super,i;return this._super=e[n],i=t.apply(this,arguments),this._super=r,i}}(r,t[r]):t[r];return u.prototype=f,u.constructor=u,u.extend=arguments.callee,u}}();t.Component=t.Class.extend({init:function(n,i){this.player=n;i=this.options=t.merge(this.options||{},i);this.el=i.el?i.el:this.createElement();this.initComponents()},destroy:function(){},createElement:function(n,i){return t.createElement(n||"div",i)},buildCSSClass:function(){return""},initComponents:function(){var n=this.options;n&&n.components&&this.eachProp(n.components,function(n,t){if(!this.options.nativeControls||n!="controlBar"){var i=this.proxy(function(){this[n]=this.addComponent(n,t)});if(t.loadEvent)this.one(t.loadEvent,i);else i()}})},addComponent:function(n,i){var r,u;return typeof n=="string"?(i=i||{},u=i.componentClass||t.uc(n),r=new t[u](this.player||this,i)):r=n,this.el.appendChild(r.el),r},removeComponent:function(n){this.el.contains(n.el)&&this.el.removeChild(n.el)},show:function(){this.el.style.display="block"},hideSpinner:function(){this.el.style.display="none"},hide:function(){},fadeIn:function(){this.removeClass("vjs-fade-out");this.addClass("vjs-fade-in")},fadeOut:function(){this.removeClass("vjs-fade-in");this.addClass("vjs-fade-out")},lockShowing:function(){var n=this.el.style;n.display="block";n.opacity=1;n.visiblity="visible"},unlockShowing:function(){var n=this.el.style;n.display="";n.opacity="";n.visiblity=""},addClass:function(n){t.addClass(this.el,n)},removeClass:function(n){t.removeClass(this.el,n)},addEvent:function(n,i){return t.addEvent(this.el,n,t.proxy(this,i))},removeEvent:function(n,i){return t.removeEvent(this.el,n,i)},triggerEvent:function(n,i){return t.triggerEvent(this.el,n,i)},one:function(n,i){t.one(this.el,n,t.proxy(this,i))},ready:function(n){return n?(this.isReady?n.call(this):(this.readyQueue===undefined&&(this.readyQueue=[]),this.readyQueue.push(n)),this):this},triggerReady:function(){this.isReady=!0;this.readyQueue&&this.readyQueue.length>0&&(this.each(this.readyQueue,function(n){n.call(this)}),this.readyQueue=[],this.triggerEvent("ready"))},each:function(n,i){t.each.call(this,n,i)},eachProp:function(n,i){t.eachProp.call(this,n,i)},extend:function(n){t.merge(this,n)},proxy:function(n,i){return t.proxy(this,n,i)}});t.Control=t.Component.extend({buildCSSClass:function(){return"vjs-control "+this._super()}});t.ControlBar=t.Component.extend({options:{loadEvent:"play",components:{playToggle:{},progressControl:{},hDToggle:{}}},mouseOverTimer:null,mouseMoveTimer:null,init:function(n,i){var r;this._super(n,i);r=this;this.skipEvent=!t.isIPad();this.wasAttached=!1;this.ie678=t.ua.indexOf("MSIE 6")!=-1||t.ua.indexOf("MSIE 7")!=-1||t.ua.indexOf("MSIE 8")!=-1;this.cursorX=0;this.cursorY=0;var f=function(n){if(this.ie678){var t=Math.abs(n.screenX-this.cursorX),i=Math.abs(n.screenY-this.cursorY);(t>3||i>3)&&(this.mohiveFadeIn(),this.cursorX=n.screenX,this.cursorY=n.screenY)}else this.mohiveFadeIn()},u=this.proxy(f),e=function(){r.player.addEvent("mousemove",u)};n.addEvent("play",this.proxy(function(){this.wasAttached&&this.ie678||(this.wasAttached=!0,this.mouseMoveTimer=setTimeout(e,1500));this.unlockShowing()}));n.addEvent("pause",this.proxy(function(){this.lockShowing();this.ie678||r.player.removeEvent("mousemove",u)}));this.fadeOut()},skipNextEvent:function(){this.skipEvent=!t.isIPad()},createElement:function(){return t.createElement("div",{className:"vjs-controls"})},mohiveFadeIn:function(){this.skipEvent?this.skipEvent=!1:this.fadeIn()},fadeIn:function(){this._super();this.player.triggerEvent("controlsvisible");var n=this;this.mouseOverTimer!=null&&clearTimeout(this.mouseOverTimer);n.mouseOverTimer=setTimeout(function(){n.fadeOut()},1e3)},fadeOut:function(){this._super();this.player.triggerEvent("controlshidden")},lockShowing:function(){this.el.style.opacity="1"}});t.Button=t.Control.extend({init:function(n,t){this._super(n,t);this.addEvent("click",this.onClick);this.addEvent("focus",this.onFocus);this.addEvent("blur",this.onBlur)},createElement:function(n,i){return i=t.merge({className:this.buildCSSClass(),innerHTML:'<div><span class="vjs-control-text">'+(this.buttonText||"Need Text")+"<\/span><\/div>",role:"button",tabIndex:-1},i),this._super(n,i)},onClick:function(){},onFocus:function(){t.addEvent(i,"keyup",t.proxy(this,this.onKeyPress))},onKeyPress:function(n){(n.which==32||n.which==13)&&(n.preventDefault(),this.onClick())},onBlur:function(){t.removeEvent(i,"keyup",t.proxy(this,this.onKeyPress))}});t.PlayButton=t.Button.extend({buttonText:"k",buildCSSClass:function(){return"vjs-play-button "+this._super()},onClick:function(){this.player.play()}});t.PauseButton=t.Button.extend({buttonText:"p",buildCSSClass:function(){return"vjs-pause-button "+this._super()},onClick:function(){this.player.pause()}});t.PlayToggle=t.Button.extend({buttonText:"k",init:function(n,i){this._super(n,i);n.addEvent("play",t.proxy(this,this.onPlay));n.addEvent("pause",t.proxy(this,this.onPause))},buildCSSClass:function(){return"vjs-play-control "+this._super()},onClick:function(){this.player.paused()?this.player.play():this.player.pause()},onPlay:function(){t.removeClass(this.el,"vjs-paused");t.addClass(this.el,"vjs-playing");$(".vjs-control-text",this.el).text("p")},onPause:function(){t.removeClass(this.el,"vjs-playing");t.addClass(this.el,"vjs-paused");$(".vjs-control-text",this.el).text("k")}});t.FullscreenToggle=t.Button.extend({buttonText:"Fullscreen",buildCSSClass:function(){return"vjs-fullscreen-control "+this._super()},onClick:function(){this.player.isFullScreen?this.player.cancelFullScreen():this.player.requestFullScreen()}});t.HDToggle=t.Button.extend({init:function(n,t){this._super(n,t);this.player.isHD=this.player.options.hd?!0:!1},buttonText:"HD",buildCSSClass:function(){return this.player.options.hd?"vjs-quality-control vjs-hd "+this._super():"vjs-quality-control "+this._super()},onClick:function(){this.player.isHD?(this.player.cancelHD(),t.removeClass(this.el,"vjs-hd")):(this.player.requestHD(),t.addClass(this.el,"vjs-hd"))}});t.BigPlayButton=t.Button.extend({init:function(n,i){this._super(n,i);n.addEvent("play",t.proxy(this,this.hide));n.addEvent("ended",t.proxy(this,this.show))},createElement:function(){return this._super("div",{className:"vjs-big-play-button",innerHTML:"<span><\/span>"})},onClick:function(){this.player.currentTime()&&this.player.currentTime(0);this.player.play()}});t.LoadingSpinner=t.Component.extend({init:function(n,i){this._super(n,i);n.addEvent("canplay",t.proxy(this,this.hideSpinner));n.addEvent("canplaythrough",t.proxy(this,this.hideSpinner));n.addEvent("playing",t.proxy(this,this.hideSpinner));n.addEvent("seeked",t.proxy(this,this.hideSpinner));n.addEvent("seeking",t.proxy(this,this.show));n.addEvent("error",t.proxy(this,this.show));!n.techName=="flash"&&n.addEvent("waiting",t.proxy(this,this.show))},hide:function(){this.el.style.display="none"},createElement:function(){var n,t;return typeof this.player.el.style.WebkitBorderRadius=="string"||typeof this.player.el.style.MozBorderRadius=="string"||typeof this.player.el.style.KhtmlBorderRadius=="string"||typeof this.player.el.style.borderRadius=="string"?(n="vjs-loading-spinner",t="<div/>"):(n="vjs-loading-spinner-fallback",t="<div/>"),this._super("div",{className:n,innerHTML:t})}});t.CurrentTimeDisplay=t.Component.extend({init:function(n,i){this._super(n,i);n.addEvent("timeupdate",t.proxy(this,this.updateContent))},createElement:function(){var n=this._super("div",{className:"vjs-current-time vjs-time-controls vjs-control"});return this.content=t.createElement("div",{className:"vjs-current-time-display",innerHTML:"0:00"}),n.appendChild(t.createElement("div").appendChild(this.content)),n},updateContent:function(){var n=this.player.scrubbing?this.player.values.currentTime:this.player.currentTime();this.content.innerHTML=t.formatTime(n,this.player.duration())}});t.DurationDisplay=t.Component.extend({init:function(n,i){this._super(n,i);n.addEvent("timeupdate",t.proxy(this,this.updateContent))},createElement:function(){var n=this._super("div",{className:"vjs-duration vjs-time-controls vjs-control"});return this.content=t.createElement("div",{className:"vjs-duration-display",innerHTML:"0:00"}),n.appendChild(t.createElement("div").appendChild(this.content)),n},updateContent:function(){this.player.duration()&&(this.content.innerHTML=t.formatTime(this.player.duration()))}});t.TimeDivider=t.Component.extend({createElement:function(){return this._super("div",{className:"vjs-time-divider",innerHTML:"<div><span>/<\/span><\/div>"})}});t.RemainingTimeDisplay=t.Component.extend({init:function(n,i){this._super(n,i);n.addEvent("timeupdate",t.proxy(this,this.updateContent))},createElement:function(){var n=this._super("div",{className:"vjs-remaining-time vjs-time-controls vjs-control"});return this.content=t.createElement("div",{className:"vjs-remaining-time-display",innerHTML:"-0:00"}),n.appendChild(t.createElement("div").appendChild(this.content)),n},updateContent:function(){this.player.duration()&&(this.content.innerHTML="-"+t.formatTime(this.player.remainingTime()))}});t.Slider=t.Component.extend({init:function(n,i){this._super(n,i);this.effectiveUpdateTimeout=null;this.ie8=t.ua.indexOf("MSIE 8")!=-1;n.addEvent(this.playerEvent,t.proxy(this,this.update));this.addEvent("mousedown",this.onMouseDown);this.addEvent("focus",this.onFocus);this.addEvent("blur",this.onBlur);this.player.addEvent("controlsvisible",this.proxy(this.update));this.update()},createElement:function(n,i){return i=t.merge({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:-1},i),this._super(n,i)},onMouseDown:function(n){n.preventDefault();t.blockTextSelection();t.addEvent(i,"mousemove",t.proxy(this,this.onMouseMove));t.addEvent(i,"mouseup",t.proxy(this,this.onMouseUp));this.onMouseMove(n)},onMouseUp:function(){t.unblockTextSelection();t.removeEvent(i,"mousemove",this.onMouseMove,!1);t.removeEvent(i,"mouseup",this.onMouseUp,!1);this.update()},update:function(){this.ie8&&this.timeout==null?this.effectiveUpdateTimeout=setTimeout(t.proxy(this,this.effectiveUpdate),2e3):this.ie8||this.effectiveUpdate()},effectiveUpdate:function(){var n,i=this.getPercent(),r,u;handle=this.handle;bar=this.bar;isNaN(i)&&(i=0);n=i;handle&&(r=this.el,u=r.offsetWidth,handleWidth=handle.el.offsetWidth+4,handlePercent=handleWidth?handleWidth/u:0,boxAdjustedPercent=1-handlePercent,adjustedProgress=i*boxAdjustedPercent,n=adjustedProgress+handlePercent/2,isNaN(n)||(handle.el.style.left=t.round(n*100,2)+"%"));isNaN(n)||(bar.el.style.width=t.round(n*100,2)+"%");this.effectiveUpdateTimeout=null},calculateDistance:function(n){var f=this.el,i=t.findPosX(f),r=f.offsetWidth,e=this.handle,u;return e&&(u=e.el.offsetWidth,i=i+u/2,r=r-u),Math.max(0,Math.min(1,(n.pageX-i)/r))},onFocus:function(){t.addEvent(i,"keyup",t.proxy(this,this.onKeyPress))},onKeyPress:function(n){n.which==37?(n.preventDefault(),this.stepBack()):n.which==39&&(n.preventDefault(),this.stepForward())},onBlur:function(){t.removeEvent(i,"keyup",t.proxy(this,this.onKeyPress))}});t.ProgressControl=t.Component.extend({options:{components:{seekBar:{}}},createElement:function(){return this._super("div",{className:"vjs-progress-control vjs-control noSwipe"})}});t.SeekBar=t.Slider.extend({options:{components:{loadProgressBar:{},bar:{componentClass:"PlayProgressBar"},handle:{componentClass:"SeekHandle"}}},playerEvent:"timeupdate",init:function(n,t){this._super(n,t)},createElement:function(){return this._super("div",{className:"vjs-progress-holder noSwipe"})},getPercent:function(){return this.player.currentTime()/this.player.duration()},onMouseDown:function(n){this._super(n);this.player.scrubbing=!0;this.videoWasPlaying=!this.player.paused();this.player.pause()},onMouseMove:function(n){var t=this.calculateDistance(n)*this.player.duration();t==this.player.duration()&&(t=t-1);t<this.player.duration()-1&&this.player.currentTime(t)},onMouseUp:function(n){this._super(n);this.player.scrubbing=!1;this.videoWasPlaying&&this.player.play()},stepForward:function(){this.player.currentTime(this.player.currentTime()+1)},stepBack:function(){this.player.currentTime(this.player.currentTime()-1)}});t.LoadProgressBar=t.Component.extend({init:function(n,i){this._super(n,i);n.addEvent("progress",t.proxy(this,this.update))},createElement:function(){return this._super("div",{className:"vjs-load-progress noSwipe",innerHTML:'<span class="vjs-control-text noSwipe">Loaded: 0%<\/span>'})},update:function(){this.el.style&&(this.el.style.width=t.round(this.player.bufferedPercent()*100,2)+"%")}});t.PlayProgressBar=t.Component.extend({createElement:function(){return this._super("div",{className:"vjs-play-progress noSwipe",innerHTML:'<span class="vjs-control-text noSwipe">Progress: 0%<\/span>'})}});t.SeekHandle=t.Component.extend({createElement:function(){return this._super("div",{className:"vjs-seek-handle noSwipe",innerHTML:'<span class="vjs-control-text noSwipe">00:00<\/span>'})}});t.VolumeControl=t.Component.extend({options:{components:{volumeBar:{}}},createElement:function(){return this._super("div",{className:"vjs-volume-control vjs-control"})}});t.VolumeBar=t.Slider.extend({options:{components:{bar:{componentClass:"VolumeLevel"},handle:{componentClass:"VolumeHandle"}}},playerEvent:"volumechange",createElement:function(){return this._super("div",{className:"vjs-volume-bar"})},onMouseMove:function(n){this.player.volume(this.calculateDistance(n))},getPercent:function(){return this.player.volume()},stepForward:function(){this.player.volume(this.player.volume()+.1)},stepBack:function(){this.player.volume(this.player.volume()-.1)}});t.VolumeLevel=t.Component.extend({createElement:function(){return this._super("div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"><\/span>'})}});t.VolumeHandle=t.Component.extend({createElement:function(){return this._super("div",{className:"vjs-volume-handle",innerHTML:'<span class="vjs-control-text"><\/span>',tabindex:-1})}});t.MuteToggle=t.Button.extend({init:function(n,i){this._super(n,i);n.addEvent("volumechange",t.proxy(this,this.update))},createElement:function(){return this._super("div",{className:"vjs-mute-control vjs-control",innerHTML:'<div><span class="vjs-control-text">Mute<\/span><\/div>'})},onClick:function(){this.player.muted(this.player.muted()?!1:!0)},update:function(){var i=this.player.volume(),n=3;i==0||this.player.muted()?n=0:i<.33?n=1:i<.67&&(n=2);t.each.call(this,[0,1,2,3],function(n){t.removeClass(this.el,"vjs-vol-"+n)});t.addClass(this.el,"vjs-vol-"+n)}});t.PosterImage=t.Button.extend({init:function(n,i){this._super(n,i);this.player.options.accessibility||this.hide();n.addEvent("playing",t.proxy(this,this.hide))},hide:function(){this.el.style.display="none"},show:function(){this.el.style.display="block"},createElement:function(){var n=t.createElement("div",{className:"vjs-poster",tabIndex:-1});return n.style.backgroundImage='url("'+this.player.options.poster+'")',n},onClick:function(){this.player.paused()?this.player.play():this.player.pause()}});t.Menu=t.Component.extend({init:function(n,t){this._super(n,t)},addItem:function(n){this.addComponent(n);n.addEvent("click",this.proxy(function(){this.unlockShowing()}))},createElement:function(){return this._super("ul",{className:"vjs-menu"})}});t.MenuItem=t.Button.extend({init:function(n,t){this._super(n,t);t.selected&&this.addClass("vjs-selected")},createElement:function(n,i){return this._super("li",t.merge({className:"vjs-menu-item",innerHTML:this.options.label},i))},onClick:function(){this.selected(!0)},selected:function(n){n?this.addClass("vjs-selected"):this.removeClass("vjs-selected")}});Array.prototype.indexOf||(Array.prototype.indexOf=function(n){"use strict";var u,r,t,i;if(this===void 0||this===null)throw new TypeError;if((u=Object(this),r=u.length>>>0,r===0)||(t=0,arguments.length>0&&(t=Number(arguments[1]),t!==t?t=0:t!==0&&t!==1/0&&t!==-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t)))),t>=r))return-1;for(i=t>=0?t:Math.max(r-Math.abs(t),0);i<r;i++)if(i in u&&u[i]===n)return i;return-1});t.extend({addEvent:function(n,r,u){var f=t.getData(n),e;f&&!f.handler&&(f.handler=function(i){var f,r,u,e;if(i=t.fixEvent(i),f=t.getData(n).events[i.type],f)for(r=[],t.each(f,function(n,t){r[t]=n}),u=0,e=r.length;u<e;u++)r[u].call(n,i)});f.events||(f.events={});e=f.events[r];e||(e=f.events[r]=[],i.addEventListener?n.addEventListener(r,f.handler,!1):i.attachEvent&&n.attachEvent("on"+r,f.handler));u.guid||(u.guid=t.guid++);e.push(u)},removeEvent:function(n,i,r){var e=t.getData(n),u,f;if(e.events){if(!i){for(i in e.events)t.cleanUpEvents(n,i);return}if(u=e.events[i],u){if(r&&r.guid)for(f=0;f<u.length;f++)u[f].guid===r.guid&&u.splice(f--,1);t.cleanUpEvents(n,i)}}},cleanUpEvents:function(n,r){var u=t.getData(n);u.events[r].length===0&&(delete u.events[r],i.removeEventListener?n.removeEventListener(r,u.handler,!1):i.detachEvent&&n.detachEvent("on"+r,u.handler));t.isEmpty(u.events)&&(delete u.events,delete u.handler);t.isEmpty(u)&&t.removeData(n)},fixEvent:function(n){var f,e,o;if(n[t.expando])return n;for(f=n,n=new t.Event(f),e=t.Event.props.length;e;)o=t.Event.props[--e],n[o]=f[o];if(n.target||(n.target=n.srcElement||i),n.target.nodeType===3&&(n.target=n.target.parentNode),!n.relatedTarget&&n.fromElement&&(n.relatedTarget=n.fromElement===n.target?n.toElement:n.fromElement),n.pageX==null&&n.clientX!=null){var s=n.target.ownerDocument||i,r=s.documentElement,u=s.body;n.pageX=n.clientX+(r&&r.scrollLeft||u&&u.scrollLeft||0)-(r&&r.clientLeft||u&&u.clientLeft||0);n.pageY=n.clientY+(r&&r.scrollTop||u&&u.scrollTop||0)-(r&&r.clientTop||u&&u.clientTop||0)}return n.which==null&&(n.charCode!=null||n.keyCode!=null)&&(n.which=n.charCode!=null?n.charCode:n.keyCode),!n.metaKey&&n.ctrlKey&&(n.metaKey=n.ctrlKey),n.which||n.button===undefined||(n.which=n.button&1?1:n.button&2?3:n.button&4?2:0),n},triggerEvent:function(n,i){var f=t.getData(n),e=n.parentNode||n.ownerDocument,r=i.type||i,u;f&&(u=f.handler);i=typeof i=="object"?i[t.expando]?i:new t.Event(r,i):new t.Event(r);i.type=r;u&&u.call(n,i);i.result=undefined;i.target=n},one:function(n,i,r){t.addEvent(n,i,function(){t.removeEvent(n,i,arguments.callee);r.apply(this,arguments)})}});t.Event=function(n,i){n&&n.type?(this.originalEvent=n,this.type=n.type,this.isDefaultPrevented=n.defaultPrevented||n.returnValue===!1||n.getPreventDefault&&n.getPreventDefault()?f:e):this.type=n;i&&t.merge(this,i);this.timeStamp=(new Date).getTime();this[t.expando]=!0};t.Event.prototype={preventDefault:function(){this.isDefaultPrevented=f;var n=this.originalEvent;n&&(n.preventDefault?n.preventDefault():n.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=f;var n=this.originalEvent;n&&(n.stopPropagation&&n.stopPropagation(),n.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=f;this.stopPropagation()},isDefaultPrevented:e,isPropagationStopped:e,isImmediatePropagationStopped:e};t.Event.props="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" ");u||(u={}),function(){var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;typeof u.parse!="function"&&(u.parse=function(text,reviver){function walk(n,t){var r,u,i=n[t];if(i&&typeof i=="object")for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(u=walk(i,r),u!==undefined?i[r]=u:delete i[r]);return reviver.call(n,t,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse");})}();t.Player=t.Component.extend({init:function(n,i,r){var f,e,s,h;this.tag=n;var o=this.el=t.createElement("div"),u=this.options={},l=u.width=n.getAttribute("width"),a=u.height=n.getAttribute("height"),v=l||300,y=a||150;if(n.player=o.player=this,this.ready(r),n.parentNode.insertBefore(o,n),o.appendChild(n),o.id=this.id=n.id,o.className=n.className,n.id+="_html5_api",n.className="vjs-tech",t.players[o.id]=this,t.merge(u,t.options),t.merge(u,this.getVideoTagSettings()),t.merge(u,i),this.options.nativeControls?n.setAttribute("controls","controls"):n.removeAttribute("controls"),n.removeAttribute("poster"),n.hasChildNodes())for(f=0,e=n.childNodes;f<e.length;f++)(e[f].nodeName=="SOURCE"||e[f].nodeName=="TRACK")&&n.removeChild(e[f]);if(this.values={},this.addClass("vjs-paused"),this.addEvent("ended",this.onEnded),this.addEvent("play",this.onPlay),this.addEvent("pause",this.onPause),this.addEvent("progress",this.onProgress),this.addEvent("error",this.onError),u.controls&&this.ready(function(){this.initComponents()}),this.textTracks=[],u.tracks&&u.tracks.length>0&&this.addTextTracks(u.tracks),u.sources[0].src=u.src,u.sources&&u.sources.length!=0)this.src(u.sources);else for(f=0,e=u.techOrder;f<e.length;f++)if(s=e[f],h=t[s],h.isSupported()){this.loadTech(s);c;break}},values:{},destroy:function(){this.controlBar&&(clearTimeout(this.controlBar.mouseOverTimer),clearTimeout(this.controlBar.mouseMoveTimer));this.stopTrackingProgress();this.stopTrackingCurrentTime();t.players[this.id]=null;delete t.players[this.id];this.tech.destroy();this.el.parentNode.removeChild(this.el)},createElement:function(){},getVideoTagSettings:function(){var t={sources:[],tracks:[]},n,i,r;if(t.src=this.tag.getAttribute("src"),t.controls=!0,t.poster=this.tag.getAttribute("poster"),t.preload=this.tag.getAttribute("preload"),t.isHD=this.tag.getAttribute("hd"),t.autoplay=this.tag.getAttribute("autoplay")!=null,t.loop=this.tag.getAttribute("loop"),t.muted=this.tag.getAttribute("muted")!==null,this.tag.hasChildNodes())for(i=0,r=this.tag.childNodes;i<r.length;i++)n=r[i],n.nodeName=="SOURCE"&&t.sources.push({src:n.getAttribute("src"),type:n.getAttribute("type"),media:n.getAttribute("media"),title:n.getAttribute("title")}),n.nodeName=="TRACK"&&t.tracks.push({src:n.getAttribute("src"),kind:n.getAttribute("kind"),srclang:n.getAttribute("srclang"),label:n.getAttribute("label"),"default":n.getAttribute("default")!==null,title:n.getAttribute("title")});return t},loadTech:function(n,i){this.tech?this.unloadTech():n!="html5"&&this.tag&&(this.el.removeChild(this.tag),this.tag=!1);this.techName=n;this.isReady=!1;var u=function(){this.player.triggerReady();this.support.progressEvent||this.player.manualProgressOn();this.support.timeupdateEvent||this.player.manualTimeUpdatesOn()},r=t.merge({source:i,parentEl:this.el},this.options[n]);i&&(i.src==this.values.src&&this.values.currentTime>0&&(r.startTime=this.values.currentTime),this.values.src=i.src);this.tech=new t[n](this,r);this.tech.ready(u)},unloadTech:function(){this.tech.destroy();this.manualProgress&&this.manualProgressOff();this.manualTimeUpdates&&this.manualTimeUpdatesOff();this.tech=!1},manualProgressOn:function(){this.manualProgress=!0;this.trackProgress();this.tech.addEvent("progress",function(){this.removeEvent("progress",arguments.callee);this.support.progressEvent=!0;this.player.manualProgressOff()})},manualProgressOff:function(){this.manualProgress=!1;this.stopTrackingProgress()},trackProgress:function(){this.progressInterval=setInterval(t.proxy(this,function(){this.values.bufferEnd<this.buffered().end(0)?this.triggerEvent("progress"):this.bufferedPercent()==1&&(this.stopTrackingProgress(),this.triggerEvent("progress"))}),500)},stopTrackingProgress:function(){clearInterval(this.progressInterval)},manualTimeUpdatesOn:function(){this.manualTimeUpdates=!0;this.addEvent("play",this.trackCurrentTime);this.addEvent("pause",this.stopTrackingCurrentTime);this.tech.addEvent("timeupdate",function(){this.removeEvent("timeupdate",arguments.callee);this.support.timeupdateEvent=!0;this.player.manualTimeUpdatesOff()})},manualTimeUpdatesOff:function(){this.manualTimeUpdates=!1;this.stopTrackingCurrentTime();this.removeEvent("play",this.trackCurrentTime);this.removeEvent("pause",this.stopTrackingCurrentTime)},trackCurrentTime:function(){this.currentTimeInterval&&this.stopTrackingCurrentTime();this.currentTimeInterval=setInterval(t.proxy(this,function(){this.triggerEvent("timeupdate")}),250)},stopTrackingCurrentTime:function(){clearInterval(this.currentTimeInterval)},onEnded:function(){this.options.loop?(this.currentTime(0),this.play()):this.techName!="flash"&&this.pause()},onPlay:function(){t.removeClass(this.el,"vjs-paused");t.addClass(this.el,"vjs-playing")},onPause:function(){t.removeClass(this.el,"vjs-playing");t.addClass(this.el,"vjs-paused")},onProgress:function(){this.bufferedPercent()==1&&this.triggerEvent("loadedalldata")},onError:function(n){t.log("Video Error",n.toString())},techCall:function(n,i){if(this.tech.isReady)try{this.tech[n](i)}catch(r){t.log(r)}else this.tech.ready(function(){this[n](i)})},techGet:function(n){if(this.tech.isReady)try{return this.tech[n]()}catch(i){this.tech[n]===undefined?t.log("Video.js: "+n+" method not defined for "+this.techName+" playback technology.",i):i.name=="TypeError"?(t.log("Video.js: "+n+" unavailable on "+this.techName+" playback technology element.",i),this.tech.isReady=!1):t.log(i)}return},play:function(){return this.techCall("play"),this},setHD:function(n){this.isHD=n;this.controlBar&&(this.isHD?t.addClass(this.controlBar.hDToggle.el,"vjs-hd"):t.removeClass(this.controlBar.hDToggle.el,"vjs-hd"))},pause:function(){return this.techCall("pause"),this},paused:function(){return this.techGet("paused")===!1?!1:!0},currentTime:function(n){return n!==undefined?(this.values.lastSetCurrentTime=n,this.techCall("setCurrentTime",n),this.manualTimeUpdates&&this.triggerEvent("timeupdate"),this):this.values.currentTime=this.techGet("currentTime")||0},duration:function(){return parseFloat(this.techGet("duration"))},remainingTime:function(){return this.duration()-this.currentTime()},buffered:function(){var n=this.techGet("buffered"),i=this.values.bufferEnd=this.values.bufferEnd||0;return n&&n.length>0&&n.end(0)!==i&&(i=n.end(0),this.values.bufferEnd=i),t.createTimeRange(0,i)},bufferedPercent:function(){return this.duration()?this.buffered().end(0)/this.duration():0},volume:function(n){var i;return n!==undefined?(i=Math.max(0,Math.min(1,parseFloat(n))),this.values.volume=i,this.techCall("setVolume",i),t.setLocalStorage("volume",i),this):(i=parseFloat(this.techGet("volume")),isNaN(i)?1:i)},muted:function(n){return n!==undefined?(this.techCall("setMuted",n),this):this.techGet("muted")||!1},width:function(n,t){return n!==undefined?(this.el.width=n,this.el.style.width=n+"px",t||this.triggerEvent("resize"),this):parseInt(this.el.getAttribute("width"))},height:function(n){return n!==undefined?(this.el.height=n,this.el.style.height=n+"px",this.triggerEvent("resize"),this):parseInt(this.el.getAttribute("height"))},size:function(n,t){return this.width(n,!0).height(t)},supportsFullScreen:function(){return this.techGet("supportsFullScreen")||!1},requestFullScreen:function(){var n=t.support.requestFullScreen;return this.isFullScreen=!0,n?(t.addEvent(i,n.eventName,this.proxy(function(){this.isFullScreen=i[n.isFullScreen];this.isFullScreen==!1&&t.removeEvent(i,n.eventName,arguments.callee);this.triggerEvent("fullscreenchange")})),this.tech.support.fullscreenResize===!1&&this.options.flash.iFrameMode!=!0?(this.pause(),this.unloadTech(),t.addEvent(i,n.eventName,this.proxy(function(){t.removeEvent(i,n.eventName,arguments.callee);this.loadTech(this.techName,{src:this.values.src})})),this.el[n.requestFn]()):this.el[n.requestFn]()):this.tech.supportsFullScreen()?(this.triggerEvent("fullscreenchange"),this.techCall("enterFullScreen")):(this.triggerEvent("fullscreenchange"),this.enterFullWindow()),this},requestHD:function(){this.isHD=!0;this.triggerEvent("hdchange")},cancelHD:function(){this.isHD=!1;this.triggerEvent("sdchange")},cancelFullScreen:function(){var n=t.support.requestFullScreen;return this.isFullScreen=!1,n?this.tech.support.fullscreenResize===!1&&this.options.flash.iFrameMode!=!0?(this.pause(),this.unloadTech(),t.addEvent(i,n.eventName,this.proxy(function(){t.removeEvent(i,n.eventName,arguments.callee);this.loadTech(this.techName,{src:this.values.src})})),i[n.cancelFn]()):i[n.cancelFn]():this.tech.supportsFullScreen()?(this.techCall("exitFullScreen"),this.triggerEvent("fullscreenchange")):(this.exitFullWindow(),this.triggerEvent("fullscreenchange")),this},enterFullWindow:function(){this.isFullWindow=!0;this.docOrigOverflow=i.documentElement.style.overflow;t.addEvent(i,"keydown",t.proxy(this,this.fullWindowOnEscKey));i.documentElement.style.overflow="hidden";t.addClass(i.body,"vjs-full-window");t.addClass(this.el,"vjs-fullscreen");this.triggerEvent("enterFullWindow")},fullWindowOnEscKey:function(n){n.keyCode==27&&(this.isFullScreen==!0?this.cancelFullScreen():this.exitFullWindow())},exitFullWindow:function(){this.isFullWindow=!1;t.removeEvent(i,"keydown",this.fullWindowOnEscKey);i.documentElement.style.overflow=this.docOrigOverflow;t.removeClass(i.body,"vjs-full-window");t.removeClass(this.el,"vjs-fullscreen");this.triggerEvent("exitFullWindow")},selectSource:function(n){for(var f,e,r,o,s,i=0,u=this.options.techOrder;i<u.length;i++)if(f=u[i],e=t[f],e.isSupported())for(r=0,o=n;r<o.length;r++)if(s=o[r],e.canPlaySource.call(this,s))return{source:s,tech:f};return!1},src:function(n){if(n instanceof Array){var i=this.selectSource(n),n,r;i?(n=i.source,r=i.tech,r==this.techName?this.src(n):this.loadTech(r,n)):t.log("No compatible source and playback technology were found.")}else n instanceof Object?t[this.techName].canPlaySource(n)?this.src(n.src):this.src([n]):(this.values.src=n,this.isReady?(this.techCall("src",n),this.options.preload=="auto"&&this.load(),this.options.autoplay&&this.play()):this.ready(function(){this.src(n)}));return this},load:function(){return this.techCall("load"),this},currentSrc:function(){return this.techGet("currentSrc")||this.values.src||""},preload:function(n){return n!==undefined?(this.techCall("setPreload",n),this.options.preload=n,this):this.techGet("preload")},autoplay:function(n){return n!==undefined?(this.techCall("setAutoplay",n),this.options.autoplay=n,this):this.techGet("autoplay",n)},loop:function(n){return n!==undefined?(this.techCall("setLoop",n),this.options.loop=n,this):this.techGet("loop")},controls:function(){return this.options.controls},poster:function(){return this.techGet("poster")},error:function(){return this.techGet("error")},ended:function(){return this.techGet("ended")}}),function(){var n,u,f,r,e=t.Player.prototype;i.cancelFullscreen!==undefined?(n="requestFullscreen",u="exitFullscreen",f="fullscreenchange",r="fullScreen"):t.each(["moz","webkit"],function(t){(t!="moz"||i.mozFullScreenEnabled)&&i[t+"CancelFullScreen"]!==undefined&&(n=t+"RequestFullScreen",u=t+"CancelFullScreen",f=t+"fullscreenchange",r=t=="webkit"?t+"IsFullScreen":t+"FullScreen")});n&&(t.support.requestFullScreen={requestFn:n,cancelFn:u,eventName:f,isFullScreen:r})}();t.PlaybackTech=t.Component.extend({init:function(){},onClick:function(){this.player.options.controls&&t.PlayToggle.prototype.onClick.call(this)}});t.apiMethods="play,pause,paused,currentTime,setCurrentTime,duration,buffered,volume,setVolume,muted,setMuted,width,height,supportsFullScreen,enterFullScreen,src,load,currentSrc,preload,setPreload,autoplay,setAutoplay,loop,setLoop,error,networkState,readyState,seeking,initialTime,startOffsetTime,played,seekable,ended,videoTracks,audioTracks,videoWidth,videoHeight,textTracks,defaultPlaybackRate,playbackRate,mediaGroup,controller,controls,defaultMuted".split(",");t.each(t.apiMethods,function(n){t.PlaybackTech.prototype[n]=function(){throw new Error("The '"+n+"' method is not available on the playback technology's API");}});t.html5=t.PlaybackTech.extend({init:function(n,t,i){this.player=n;this.el=this.createElement();this.ready(i);this.addEvent("click",this.proxy(this.onClick));var r=t.source;r&&this.el.currentSrc==r.src?n.triggerEvent("loadstart"):r&&(this.el.src=r.src);n.ready(function(){this.options.autoplay&&this.paused()&&(this.tag.poster=null,this.play())});this.setupTriggers();this.triggerReady()},destroy:function(){this.player.tag=!1;this.removeTriggers();this.el.parentNode.removeChild(this.el)},createElement:function(){var u=t.html5,i=this.player,n=i.tag,r;return n&&this.support.movingElementInDOM!==!1||(n&&i.el.removeChild(n),r=t.createElement("video",{id:n.id||i.el.id+"_html5_api",className:n.className||"vjs-tech"}),n=r,t.insertFirst(n,i.el)),t.each(["autoplay","preload","loop","muted"],function(t){i.options[t]!==null&&(n[t]=i.options[t])},this),i.options.nativeControls&&i.options.controls!==null&&(n.controls=i.options.controls),n},setupTriggers:function(){t.each.call(this,t.html5.events,function(n){t.addEvent(this.el,n,t.proxy(this.player,this.eventHandler))})},removeTriggers:function(){t.each.call(this,t.html5.events,function(n){t.removeEvent(this.el,n,t.proxy(this.player,this.eventHandler))})},eventHandler:function(n){n.stopPropagation();this.triggerEvent(n)},play:function(){this.el.play()},pause:function(){this.el.pause()},paused:function(){return this.el.paused},currentTime:function(){return this.el.currentTime},setCurrentTime:function(n){try{this.el.currentTime=n}catch(i){t.log(i,"Video isn't ready. (VideoJS)")}},duration:function(){return this.el.duration||0},buffered:function(){return this.el.buffered},volume:function(){return this.el.volume},setVolume:function(n){this.el.volume=n},muted:function(){return this.el.muted},setMuted:function(n){this.el.muted=n},width:function(){return this.el.offsetWidth},height:function(){return this.el.offsetHeight},supportsFullScreen:function(){return typeof this.el.webkitEnterFullScreen=="function"&&!navigator.userAgent.match("Chrome")&&!navigator.userAgent.match("Mac OS X 10.5")?!0:!1},enterFullScreen:function(){try{this.el.webkitEnterFullScreen()}catch(n){n.code==11&&t.log("VideoJS: Video not ready.")}},src:function(n){this.el.src=n},load:function(){this.el.load()},currentSrc:function(){return this.el.currentSrc},preload:function(){return this.el.preload},setPreload:function(n){this.el.preload=n},autoplay:function(){return this.el.autoplay},setAutoplay:function(n){this.el.autoplay=n},loop:function(){return this.el.loop},setLoop:function(n){this.el.loop=n},error:function(){return this.el.error},seeking:function(){return this.el.seeking},ended:function(){return this.el.ended},controls:function(){return this.player.options.controls},defaultMuted:function(){return this.el.defaultMuted}});t.html5.isSupported=function(){return!!i.createElement("video").canPlayType};t.html5.canPlaySource=function(n){return!!i.createElement("video").canPlayType(n.type)};t.html5.events="loadstart,suspend,abort,error,emptied,stalled,loadedmetadata,loadeddata,canplay,canplaythrough,playing,waiting,seeking,seeked,ended,durationchange,timeupdate,progress,play,pause,ratechange,volumechange".split(",");t.html5.prototype.support={fullscreen:typeof t.testVid.webkitEnterFullScreen!==undefined?!t.ua.match("Chrome")&&!t.ua.match("Mac OS X 10.5")?!0:!1:!1,movingElementInDOM:!t.isIOS()};t.isAndroid()&&t.androidVersion()<3&&(i.createElement("video").constructor.prototype.canPlayType=function(n){return n&&n.toLowerCase().indexOf("video/mp4")!=-1?"maybe":""});t.flash=t.PlaybackTech.extend({init:function(n,i){var r;this.player=n;var s=i.source,h=i.parentEl,f=this.el=t.createElement("div",{id:h.id+"_temp_flash"}),e=n.el.id+"_flash_api",o=n.options,u=t.merge({readyFunction:"_V_.flash.onReady",eventProxyFunction:"_V_.flash.onEvent",errorEventProxyFunction:"_V_.flash.onError",autoplay:o.autoplay,preload:o.preload,loop:o.loop,muted:o.muted},i.flashVars),c=t.merge({wmode:"transparent",bgcolor:"#ffffff"},i.params),l=t.merge({id:e,name:e,"class":"vjs-tech"},i.attributes);s&&(u.src=encodeURIComponent(t.getAbsoluteURL(s.src)));t.insertFirst(f,h);i.startTime&&this.ready(function(){this.load();this.play();this.currentTime(i.startTime)});i.iFrameMode!=!0||t.isFF?t.flash.embed(i.swf,f,u,c,l):(r=t.createElement("iframe",{id:e+"_iframe",name:e+"_iframe",className:"vjs-tech",scrolling:"no",marginWidth:0,marginHeight:0,frameBorder:0}),u.readyFunction="ready",u.eventProxyFunction="events",u.errorEventProxyFunction="errors",t.addEvent(r,"load",t.proxy(this,function(){var f,n=r.contentWindow;f=r.contentDocument?r.contentDocument:r.contentWindow.document;f.write(t.flash.getEmbedCode(i.swf,u,c,l));n.player=this.player;n.ready=t.proxy(this.player,function(n){var r=f.getElementById(n),u=this,i=u.tech;i.el=r;t.addEvent(r,"click",i.proxy(i.onClick));t.flash.checkReady(i)});n.events=t.proxy(this.player,function(n,t){var i=this;i&&i.techName=="flash"&&i.triggerEvent(t)});n.errors=t.proxy(this.player,function(n,i){t.log("Flash Error",i)})})),f.parentNode.replaceChild(r,f))},destroy:function(){this.el.parentNode.removeChild(this.el)},play:function(){this.el.vjs_play()},pause:function(){this.el.vjs_pause()},src:function(n){if(n=t.getAbsoluteURL(n),this.el.vjs_src(n),this.player.autoplay()){var i=this;setTimeout(function(){i.play()},0)}},load:function(){this.el.vjs_load()},poster:function(){this.el.vjs_getProperty("poster")},buffered:function(){return t.createTimeRange(0,this.el.vjs_getProperty("buffered"))},supportsFullScreen:function(){return!1},enterFullScreen:function(){return!1}}),function(){var n=t.flash.prototype,i="preload,currentTime,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted".split(","),r="error,currentSrc,networkState,readyState,seeking,initialTime,duration,startOffsetTime,paused,played,seekable,ended,videoTracks,audioTracks,videoWidth,videoHeight,textTracks".split(","),u="load,play,pause".split(",");createSetter=function(t){var i=t.charAt(0).toUpperCase()+t.slice(1);n["set"+i]=function(n){return this.el.vjs_setProperty(t,n)}};createGetter=function(t){n[t]=function(){return this.el.vjs_getProperty(t)}};t.each(i,function(n){createGetter(n);createSetter(n)});t.each(r,function(n){createGetter(n)})}();t.flash.isSupported=function(){return t.flash.version()[0]>=9};t.flash.canPlaySource=function(n){if(n.type in t.flash.prototype.support.formats)return"maybe"};t.flash.prototype.support={formats:{"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"},progressEvent:!1,timeupdateEvent:!1,fullscreenResize:!1,parentResize:!t.ua.match("Firefox")};t.flash.onReady=function(n){var i=t.el(n),u=i.player||i.parentNode.player,r=u.tech;i.player=u;r.el=i;r.addEvent("click",r.onClick);t.flash.checkReady(r)};t.flash.checkReady=function(n){n.el.vjs_getProperty?n.triggerReady():setTimeout(function(){t.flash.checkReady(n)},50)};t.flash.onEvent=function(n,i){var r=t.el(n).player;r.triggerEvent(i)};t.flash.onError=function(n,i){var r=t.el(n).player;r.triggerEvent("error");t.log("Flash Error",i,n)};t.flash.version=function(){var n="0,0,0";try{n=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(t){try{navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(n=(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1])}catch(t){}}return n.split(",")};t.flash.embed=function(n,i,r,u,f){var s=t.flash.getEmbedCode(n,r,u,f),e=t.createElement("div",{innerHTML:s}).childNodes[0],h=i.parentNode,o;return i.parentNode.replaceChild(e,i),t.isIE()&&(o=h.childNodes[0],setTimeout(function(){o.style.display="block"},1e3)),e};t.flash.getEmbedCode=function(n,i,r,u){var f="",e="";return attrsString="",i&&t.eachProp(i,function(n,t){f+=n+"="+t+"&amp;"}),r=t.merge({movie:n,flashvars:f,allowScriptAccess:"always",allowNetworking:"all"},r),t.eachProp(r,function(n,t){e+='<param name="'+n+'" value="'+t+'" />'}),u=t.merge({data:n,width:"100%",height:"100%"},u),t.eachProp(u,function(n,t){attrsString+=n+'="'+t+'" '}),'<object type="application/x-shockwave-flash"'+attrsString+">"+e+"<\/object>"};t.merge(t.Player.prototype,{addTextTracks:function(n){for(var f=this.textTracks=this.textTracks?this.textTracks:[],r=0,e=n.length,i,u;r<e;r++)u=t.uc(n[r].kind||"subtitles"),i=new t[u+"Track"](this,n[r]),f.push(i),i["default"]&&this.ready(t.proxy(i,i.show));return this},showTextTrack:function(n,t){for(var e=this.textTracks,r=0,o=e.length,i,u,f;r<o;r++)i=e[r],i.id===n?(i.show(),u=i):t&&i.kind==t&&i.mode>0&&i.disable();return f=u?u.kind:t?t:!1,f&&this.triggerEvent(f+"trackchange"),this},getSubtitleByUrl:function(n){for(var t=0;t<this.textTracks.length;t++)if(this.textTracks[t].src==n)return this.textTracks[t];return null},changeSubtitle:function(n){var t=this.getSubtitleByUrl(n);t==null&&(t={src:n,kind:"captions",srclang:"",label:"","default":!0,title:""},this.addTextTracks([t]),t=this.getSubtitleByUrl(n));this.showTextTrack(t.id,t.kind)}});t.Track=t.Component.extend({init:function(n,i){this._super(n,i);t.merge(this,{id:i.id||"vjs_"+i.kind+"_"+i.language+"_"+t.guid++,src:i.src,"default":i["default"],title:i.title,language:i.srclang,label:i.label,cues:[],activeCues:[],readyState:0,mode:0,wasAdded:0})},createElement:function(){return this._super("div",{className:"vjs-"+this.kind+" vjs-text-track"})},show:function(){this.activate();this.mode=2;this._super()},hide:function(){this.activate();this.mode=1;this._super()},disable:function(){this.mode==2&&this.hide();this.deactivate();this.mode=0},activate:function(){this.readyState==0&&this.load();this.mode==0&&(this.player.addEvent("timeupdate",this.proxy(this.update,this.id)),this.player.addEvent("ended",this.proxy(this.reset,this.id)),(this.kind=="captions"||this.kind=="subtitles")&&this.player.textTrackDisplay&&(this.player.textTrackDisplay.addComponent(this),this.wasAdded=1))},deactivate:function(){this.player.removeEvent("timeupdate",this.proxy(this.update,this.id));this.player.removeEvent("ended",this.proxy(this.reset,this.id));this.reset();this.player.textTrackDisplay&&(this.player.textTrackDisplay.removeComponent(this),this.wasAdded=0)},load:function(){this.readyState==0&&(this.readyState=1,t.get(this.src,this.proxy(this.parseCues),this.proxy(this.onError)))},onError:function(n){this.error=n;this.readyState=3;this.triggerEvent("error")},parseCues:function(n){for(var u,e,o,f=n.split("\n"),i="",s,r=1,h=f.length;r<h;r++)if(i=t.trim(f[r]),i){for(i.indexOf("-->")==-1?(s=i,i=t.trim(f[++r])):s=this.cues.length,u={id:s,index:this.cues.length},e=i.split(" --> "),u.startTime=this.parseCueTime(e[0]),u.endTime=this.parseCueTime(e[1]),o=[];f[++r]&&(i=t.trim(f[r]));)o.push(i);u.text=o.join("<br/>");this.cues.push(u)}this.readyState=2;this.triggerEvent("loaded")},parseCueTime:function(n){var r=0,t,f,e,u,i,o;try{n&&(t=n.split(":"),t.length>1&&(t.length==3?(f=t[0],e=t[1],u=t[2]):(f=0,e=t[0],u=t[1]),u=u.split(/\s+/),i=u.splice(0,1)[0],i=i.split(/\.|,/),o=parseFloat(i[1]),i=i[0],r+=parseFloat(f)*3600,r+=parseFloat(e)*60,r+=parseFloat(i),o&&(r+=o/1e3)))}catch(s){}return r},update:function(){var i;if(this.cues.length>0&&(this.wasAdded==0&&this.player.textTrackDisplay&&(this.player.textTrackDisplay.addComponent(this),this.wasAdded=1),i=this.player.currentTime(),this.prevChange===undefined||i<this.prevChange||this.nextChange<=i)){var s=this.cues,r=this.player.duration(),u=0,f=!1,h=[],e,o,n,t;for(i>=this.nextChange||this.nextChange===undefined?t=this.firstActiveIndex!==undefined?this.firstActiveIndex:0:(f=!0,t=this.lastActiveIndex!==undefined?this.lastActiveIndex:s.length-1);;){if(n=s[t],n.endTime<=i)u=Math.max(u,n.endTime),n.active&&(n.active=!1);else if(i<n.startTime){if(r=Math.min(r,n.startTime),n.active&&(n.active=!1),!f)break}else f?(h.splice(0,0,n),o===undefined&&(o=t),e=t):(h.push(n),e===undefined&&(e=t),o=t),r=Math.min(r,n.endTime),u=Math.max(u,n.startTime),n.active=!0;if(f)if(t===0)break;else t--;else if(t===s.length-1)break;else t++}this.activeCues=h;this.nextChange=r;this.prevChange=u;this.firstActiveIndex=e;this.lastActiveIndex=o;this.updateDisplay();this.triggerEvent("cuechange")}},updateDisplay:function(){for(var t=this.activeCues,i="",n=0,r=t.length;n<r;n++)i+="<span class='vjs-tt-cue'>"+t[n].text+"<\/span>";this.el.innerHTML=i},reset:function(){this.nextChange=0;this.prevChange=this.player.duration();this.firstActiveIndex=0;this.lastActiveIndex=0}});t.CaptionsTrack=t.Track.extend({kind:"captions"});t.SubtitlesTrack=t.Track.extend({kind:"subtitles"});t.ChaptersTrack=t.Track.extend({kind:"chapters"});t.TextTrackDisplay=t.Component.extend({createElement:function(){return this._super("div",{className:"vjs-text-track-display"})}});t.TextTrackMenuItem=t.MenuItem.extend({init:function(n,i){var r=this.track=i.track;i.label=r.label;i.selected=r["default"];this._super(n,i);this.player.addEvent(r.kind+"trackchange",t.proxy(this,this.update))},onClick:function(){this._super();this.player.showTextTrack(this.track.id,this.track.kind)},update:function(){this.track.mode==2?(this.track.buttonText="s",this.selected(!0)):(this.track.buttonText="t",this.selected(!1))}});t.OffTextTrackMenuItem=t.TextTrackMenuItem.extend({init:function(n,t){t.track={kind:t.kind,player:n,label:"Off"};this._super(n,t)},onClick:function(){this._super();this.player.showTextTrack(this.track.id,this.track.kind)},update:function(){for(var i=this.player.textTracks,n=0,u=i.length,t,r=!0;n<u;n++)t=i[n],t.kind==this.track.kind&&t.mode==2&&(r=!1);r?this.selected(!0):this.selected(!1)}});t.TextTrackButton=t.Button.extend({init:function(n,t){this._super(n,t);this.menu=this.createMenu();this.items.length===0&&this.hide()},createMenu:function(){var n=new t.Menu(this.player);return n.el.appendChild(t.createElement("li",{className:"vjs-menu-title",innerHTML:t.uc(this.kind)})),n.addItem(new t.OffTextTrackMenuItem(this.player,{kind:this.kind})),this.items=this.createItems(),this.each(this.items,function(t){n.addItem(t)}),this.addComponent(n),n},createItems:function(){var n=[];return this.each(this.player.textTracks,function(i){i.kind===this.kind&&n.push(new t.TextTrackMenuItem(this.player,{track:i}))}),n},buildCSSClass:function(){return this.className+" vjs-menu-button "+this._super()},onFocus:function(){this.menu.lockShowing();t.one(this.menu.el.childNodes[this.menu.el.childNodes.length-1],"blur",this.proxy(function(){this.menu.unlockShowing()}))},onBlur:function(){},onClick:function(){this.one("mouseout",this.proxy(function(){this.menu.unlockShowing();this.el.blur()}))}});t.CaptionsButton=t.TextTrackButton.extend({kind:"captions",buttonText:"Captions",className:"vjs-captions-button"});t.SubtitlesButton=t.TextTrackButton.extend({kind:"subtitles",buttonText:"t",className:"vjs-subtitles-button"});t.ChaptersButton=t.TextTrackButton.extend({kind:"chapters",buttonText:"Chapters",className:"vjs-chapters-button",createItems:function(){var n=[];return this.each(this.player.textTracks,function(i){i.kind===this.kind&&n.push(new t.TextTrackMenuItem(this.player,{track:i}))}),n},createMenu:function(){for(var e=this.player.textTracks,i=0,o=e.length,n,u,c=this.items=[],r;i<o;i++)if(n=e[i],n.kind==this.kind&&n["default"]){if(n.readyState<2){this.chaptersTrack=n;n.addEvent("loaded",this.proxy(this.createMenu));return}u=n;break}if(r=this.menu=new t.Menu(this.player),r.el.appendChild(t.createElement("li",{className:"vjs-menu-title",innerHTML:t.uc(this.kind)})),u)for(var s=u.cues,i=0,o=s.length,h,f;i<o;i++)h=s[i],f=new t.ChaptersTrackMenuItem(this.player,{track:u,cue:h}),c.push(f),r.addComponent(f);return this.addComponent(r),this.items.length>0&&this.show(),r}});t.ChaptersTrackMenuItem=t.MenuItem.extend({init:function(n,i){var f=this.track=i.track,r=this.cue=i.cue,u=n.currentTime();i.label=r.text;i.selected=r.startTime<=u&&u<r.endTime;this._super(n,i);f.addEvent("cuechange",t.proxy(this,this.update))},onClick:function(){this._super();this.player.currentTime(this.cue.startTime);this.update(this.cue.startTime)},update:function(){var n=this.cue,t=this.player.currentTime();n.startTime<=t&&t<n.endTime?this.selected(!0):this.selected(!1)}});t.merge(t.ControlBar.prototype.options.components,{subtitlesButton:{},captionsButton:{},chaptersButton:{}});t.autoSetup=function(){var r,n,s,f=i.getElementsByTagName("video"),e,o;if(f&&f.length>0)for(e=0,o=f.length;e<o;e++)if(n=f[e],n&&n.getAttribute)n.player===undefined&&(r=n.getAttribute("data-setup"),r!==null&&(r=u.parse(r||"{}"),s=t(n,r)));else{t.autoSetupTimeout(1);break}else t.windowLoaded||t.autoSetupTimeout(1)};t.autoSetupTimeout=function(n){setTimeout(t.autoSetup,n)};t.addEvent(n,"load",function(){t.windowLoaded=!0});t.autoSetup();n.VideoJS=n._V_=r})(window);
//# sourceMappingURL=video.min.js.map
