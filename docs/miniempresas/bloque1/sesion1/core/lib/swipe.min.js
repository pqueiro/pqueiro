function Swipe(n,t){"use strict";function tt(){var s,h;for(f=u.children,ot=f.length,f.length<2&&(t.continuous=!1),v.transitions&&t.continuous&&f.length<3&&(u.appendChild(f[0].cloneNode(!0)),u.appendChild(u.children[1].cloneNode(!0)),f=u.children),c=new Array(f.length),r=n.getBoundingClientRect().width||n.offsetWidth,u.style.width=f.length*r+"px",s=f.length;s--;)h=f[s],h.style.width=r+"px",h.setAttribute("data-index",s),v.transitions&&(h.style.left=s*-r+"px",o(s,i>s?-r:i<s?r:0,0));t.continuous&&v.transitions&&(o(e(i-1),-r,0),o(e(i+1),r,0));v.transitions||(u.style.left=i*-r+"px");n.style.visibility="visible"}function at(){t.continuous?y(i-1):i&&y(i-1)}function st(){t.continuous?y(i+1):i<f.length-1&&y(i+1)}function e(n){return(f.length+n%f.length)%f.length}function y(n,u){var s,p,l;if(nt=applicationViewModel.exercises()[n]&&applicationViewModel.exercises()[n].isLocked(),i==n){a(e(n-1),c[e(n-1)],h*.5);a(n,c[n],h*.5);a(e(n+1),c[e(n+1)],h*.5);return}if(n>i&&nt){a(i,c[i]-r*.3,h*.5);a(n,c[n]-r*.3,h*.5);setTimeout(function(){y(i,h*.5)},h*1.2);return}if(v.transitions){for(s=Math.abs(i-n)/(i-n),t.continuous&&(p=s,s=-c[e(n)]/r,s!==p&&(n=-s*f.length+n)),l=Math.abs(i-n)-1;l--;)o(e((n>i?n:i)-l-1),r*s,0);n=e(n);o(i,r*s,u||h);o(n,0,u||h);t.continuous&&o(e(n-s),-(r*s),0)}else n=e(n),vt(i*-r,n*-r,u||h);i=n;t.callback&&t.callback(i,f[i])}function o(n,t,i){a(n,t,i);c[n]=t}function a(n,t,i){var u=f[n],r=u&&u.style;r&&(r.webkitTransitionDuration=r.MozTransitionDuration=r.msTransitionDuration=r.OTransitionDuration=r.transitionDuration=i+"ms",r.webkitTransform="translate("+t+"px,0)translateZ(0)",r.msTransform=r.MozTransform=r.OTransform="translateX("+t+"px)translateZ(0)")}function vt(n,r,e){if(!e){u.style.left=r+"px";return}var o=+new Date,s=setInterval(function(){var h=+new Date-o;if(h>e){u.style.left=r+"px";p&&ut();t.transitionEnd&&t.transitionEnd.call(event,i,f[i]);clearInterval(s);return}u.style.left=(r-n)*(Math.floor(h/e*100)/100)+n+"px"},4)}function ut(){ht=setTimeout(st,p)}function g(){p=0;clearTimeout(ht)}function et(){v.addEventListener?(u.removeEventListener(b,l,!1),u.removeEventListener("webkitTransitionEnd",l,!1),u.removeEventListener("msTransitionEnd",l,!1),u.removeEventListener("oTransitionEnd",l,!1),u.removeEventListener("otransitionend",l,!1),u.removeEventListener("transitionend",l,!1),window.removeEventListener("resize",l,!1)):window.onresize=null}function ct(){v.addEventListener?(v.touch&&applicationViewModel.platformFeatures.getAllowManualSwipe()&&u.addEventListener(b,l,!0),v.transitions&&(u.addEventListener("webkitTransitionEnd",l,!1),u.addEventListener("msTransitionEnd",l,!1),u.addEventListener("oTransitionEnd",l,!1),u.addEventListener("otransitionend",l,!1),u.addEventListener("transitionend",l,!1)),window.addEventListener("resize",l,!1)):window.onresize=function(){tt()}}var lt=function(){},rt=function(n){setTimeout(n||lt,0)},b="touchstart",k="touchend",d="touchmove",v,u,f,c,r,ot,i,h,p,ht;if(window.navigator.msPointerEnabled&&(b="MSPointerDown",k="MSPointerUp",d="MSPointerMove"),window.navigator.pointerEnabled&&(b="pointerdown",k="pointerup",d="pointermove"),v={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(n){var t=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var i in t)if(n.style[t[i]]!==undefined)return!0;return!1}(document.createElement("swipe"))},n){u=n.children[0];t=t||{};i=parseInt(t.startSlide,10)||0;h=t.speed||300;t.continuous=t.continuous!==undefined?t.continuous:!0;p=t.auto||0;var it={},s={},w,nt,ft,l={handleEvent:function(n){if(!$(n.target).hasClass("noSwipe")&&!$(u).hasClass("noSwipe")){switch(n.type){case b:this.start(n);break;case d:this.move(n);break;case k:rt(this.end(n));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":rt(this.transitionEnd(n));break;case"resize":rt(tt.call())}t.stopPropagation&&n.stopPropagation()}},start:function(n){var r;r=n.touches==undefined?n:n.touches[0];it={x:r.pageX,y:r.pageY,time:+new Date};w=undefined;s={};u.addEventListener(d,this,!1);u.addEventListener(k,this,!1);t.startCallback&&t.startCallback();t.currentMoveCallbackOnce=t.moveCallbackOnce;nt=applicationViewModel.exercises()[i+1]&&applicationViewModel.exercises()[i+1].isLocked();ft=!1},move:function(n){var u,o,h;if(t.moveAlwaysCallback&&t.moveAlwaysCallback(i,f[i]),n.touches==undefined){if(n.length>1||n.scale&&n.scale!==1)return}else if(n.touches.length>1||n.scale&&n.scale!==1)return;t.disableScroll&&n.preventDefault();u=n.touches==undefined?n:n.touches[0];s={x:u.pageX-it.x,y:u.pageY-it.y};typeof w=="undefined"&&(w=!!(w||Math.abs(s.x)<Math.abs(s.y)));w||(t.currentMoveCallbackOnce&&(o=t.currentMoveCallbackOnce,t.currentMoveCallbackOnce=null,o(i,f[i])),t.moveCallback&&t.moveCallback(i,f[i]),n.preventDefault(),g(),ft||(t.continuous?(a(e(i-1),s.x+c[e(i-1)],0),a(i,s.x+c[i],0),a(e(i+1),s.x+c[e(i+1)],0)):(s.x=s.x/(!i&&s.x>0||i==f.length-1&&s.x<0?Math.abs(s.x)/r+1:1),a(i-1,s.x+c[i-1],0),a(i,s.x+c[i],0),a(i+1,s.x+c[i+1],0)),h=s.x<0,nt&&h&&s.x+c[i]<-(r*.3)&&(ft=!0)))},end:function(){var y=+new Date-it.time,p=Number(y)<250&&Math.abs(s.x)>20||Math.abs(s.x)>r/2,a=!i&&s.x>0||i==f.length-1&&s.x<0,n,v;t.continuous&&(a=!1);n=s.x<0;w||(v=n&&nt,!p||a||v?t.continuous?(o(e(i-1),-r,h),o(i,0,h),o(e(i+1),r,h)):(o(i-1,-r,h),o(i,0,h),o(i+1,r,h)):(n?(t.continuous?(o(e(i-1),-r,0),o(e(i+2),r,0)):o(i-1,-r,0),o(i,c[i]-r,h),o(e(i+1),c[e(i+1)]-r,h),i=e(i+1)):(t.continuous?(o(e(i+1),r,0),o(e(i-2),-r,0)):o(i+1,r,0),o(i,c[i]+r,h),o(e(i-1),c[e(i-1)]+r,h),i=e(i-1)),t.callback&&t.callback(i,f[i])));u.removeEventListener(d,l,!1);u.removeEventListener(k,l,!1)},transitionEnd:function(n){parseInt(n.target.getAttribute("data-index"),10)==i&&(p&&ut(),t.transitionEnd&&t.transitionEnd.call(n,i,f[i]))}};return tt(),p&&ut(),ct(),{bindEvents:function(){et();ct()},unbindEvents:function(){et()},setup:function(){requestAnimationFrame(function(){tt()})},slide:function(n,t){requestAnimationFrame(function(){g();y(n,t)})},prev:function(){requestAnimationFrame(function(){g();at()})},next:function(){requestAnimationFrame(function(){g();st()})},getPos:function(){return i},getNumSlides:function(){return ot},kill:function(){var n,t;for(g(),u.style.width="auto",u.style.left=0,n=f.length;n--;)t=f[n],t.style.width="100%",t.style.left=0,v.transitions&&a(n,0,0);et()}}}}(window.jQuery||window.Zepto)&&function(n){n.fn.Swipe=function(t){return this.each(function(){n(this).data("Swipe",new Swipe(n(this)[0],t))})}}(window.jQuery||window.Zepto);
//# sourceMappingURL=swipe.min.js.map
